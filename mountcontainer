#Storage account must be created according to https://learn.microsoft.com/en-us/azure/storage/blobs/network-file-system-protocol-support-how-to
#VM IP should be added to Storage account Networking


#use the AZ Mount helper package
https://learn.microsoft.com/en-us/azure/storage/blobs/network-file-system-protocol-support-how-to#step-5-install-the-aznfs-mount-helper-package
#install as root user
wget -O - -q https://github.com/Azure/AZNFS-mount/releases/latest/download/aznfs_install.sh | bash

##mount container

#create directory
mkdir -p /nfsdata

#create an entry in /etc/fstab
sudo nano /etc/fstab

#add following line to fstab
<storage-account-name>.blob.core.windows.net:/<storage-account-name>/<container-name>  /nfsdata    aznfs defaults,sec=sys,vers=3,nolock,proto=tcp,nofail,_netdev    0 0

#run to process fstab entries
sudo mount /nfsdata

#switch to user profile and give permissions
sudo chmod 0755 /nfsdata
